(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{113:function(e,n){},115:function(e,n,t){"use strict";t.r(n);var r,a,o,c,i,s,u,b,l,j,d,O,p,f=t(1),g=t.n(f),m=t(35),h=t.n(m),x=(t(74),t(3)),v=t(15),y=t(4),w={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"]},E=t(0),k=y.b.div(r||(r=Object(x.a)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    background: ",";\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"])),w.gray[2]),C=y.b.div(a||(a=Object(x.a)(["\n    .logo-area {\n        display: block;\n        padding-bottom: 2rem;\n        text-align: center;\n        font-weight: bold;\n        letter-spacing: 2px;\n    }\n    box-shadow: 0 0 8px rgba(0,0,0,0.025);\n    padding: 2rem;\n    width: 360px;\n    background: #fff;\n    border-radius: 2px;\n"]))),S=function(e){var n=e.children;return Object(E.jsx)(k,{children:Object(E.jsxs)(C,{children:[Object(E.jsx)("div",{className:"logo-area",children:Object(E.jsx)(v.b,{to:"/",children:"GIVVEMEE \u2763\ufe0f"})}),n]})})},I=t(16),T=t(9),P=t(5),_=Object(y.a)(o||(o=Object(x.a)(["\n    border: none;\n    border-radius: 4px;\n    font-size: 1rem;\n    font-weight: bold;\n    padding: .25rem 1rem;\n    color: #fff;\n    outline: none;\n    cursor: pointer;\n\n    background: ",";\n    &:hover {\n        background: ","\n    }\n\n    ","\n    ","\n    &:disabled {\n        background: ",";\n        color: ",";\n        cursor: not-allowed;\n    }\n"])),w.gray[8],w.gray[6],(function(e){return e.fullWidth&&Object(y.a)(c||(c=Object(x.a)(["\n        padding-top: 0.75rem;\n        padding-bottom: 0.75rem;\n        width: 100%;\n        font-size: 1.125rem;\n    "])))}),(function(e){return e.red&&Object(y.a)(i||(i=Object(x.a)(["\n        background: ",";\n        &:hover {\n            background: ",";\n        }\n    "])),w.red[5],w.red[4])}),w.gray[3],w.gray[5]),L=y.b.button(s||(s=Object(x.a)(["\n    ","\n"])),_),D=Object(y.b)(v.b)(u||(u=Object(x.a)(["\n    ","\n"])),_),N=function(e){return e.to?Object(E.jsx)(D,Object(P.a)(Object(P.a)({},e),{},{red:e.red?1:0})):Object(E.jsx)(L,Object(P.a)({},e))},R=y.b.div(b||(b=Object(x.a)(["\n    h3 {\n        margin: 0;\n        color: ",";\n        margin-bottom: 1rem;\n    }\n"])),w.gray[8]),F=y.b.input(l||(l=Object(x.a)(["\n    font-style: 1rem;\n    border: none;\n    border-bottom: 1px solid ",";\n    padding-bottom: 0.5rem;\n    outline: none;\n    width: 100%;\n    &:focus {\n        color: $oc-teal-7;\n        border-bottom: 1px solid ",";\n    }\n    &+& {\n        margin-top: 1rem;\n    }\n"])),w.gray[5],w.gray[7]),A=y.b.div(j||(j=Object(x.a)(["\n    margin-top: 2rem;\n    text-align: right;\n    a {\n        color: ",";\n        text-decoration: underline;\n        &:hover {\n            color: ",";\n        }\n    }\n"])),w.gray[6],w.gray[9]),M=Object(y.b)(N)(d||(d=Object(x.a)(["\n    margin-top: 1rem;\n"]))),G={login:"Log in",register:"Sign Up"},z=y.b.div(O||(O=Object(x.a)(["\n    color: red;\n    text-align: center;\n    font-size: 0.875rem;\n    margin-top: 1rem;\n"]))),U=function(e){var n=e.type,t=e.form,r=e.onChange,a=e.onSubmit,o=e.error,c=G[n];return Object(E.jsxs)(R,{children:[Object(E.jsx)("h3",{children:c}),Object(E.jsxs)("form",{onSubmit:a,children:[Object(E.jsx)(F,{autoComplete:"username",name:"username",placeholder:"id",onChange:r,value:t.username}),Object(E.jsx)(F,{autoComplete:"new-password",name:"password",placeholder:"password",type:"password",onChange:r,value:t.password}),"register"===n&&Object(E.jsx)(F,{autoComplete:"new-password",name:"passwordConfirm",placeholder:"Confirm Password",type:"password",onChange:r,value:t.passwordConfirm}),o&&Object(E.jsx)(z,{children:o}),Object(E.jsx)(M,{red:!0,fullWidth:!0,children:c})]}),Object(E.jsx)(A,{children:"login"===n?Object(E.jsx)(v.b,{to:"/register",children:"Sign Up"}):Object(E.jsx)(v.b,{to:"/login",children:"Log in"})})]})},V=t(8),B=t(12),H=t.n(B),W=t(117),J=t(116),q=t(63),Q=t(14),Z="loading/START_LOADING",K="loading/FINISH_LOADING",$=Object(W.a)(Z,(function(e){return e})),X=Object(W.a)(K,(function(e){return e})),Y=Object(J.a)((p={},Object(V.a)(p,Z,(function(e,n){return Object(P.a)(Object(P.a)({},e),{},Object(V.a)({},n.payload,!0))})),Object(V.a)(p,K,(function(e,n){return Object(P.a)(Object(P.a)({},e),{},Object(V.a)({},n.payload,!1))})),p),{}),ee=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function ne(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return H.a.mark((function a(o){var c;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Q.c)($(e));case 2:return a.prev=2,a.next=5,Object(Q.b)(n,o.payload);case 5:return c=a.sent,a.next=8,Object(Q.c)({type:t,payload:c.data,meta:c});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(Q.c)({type:r,payload:a.t0,error:!0});case 14:return a.next=16,Object(Q.c)(X(e));case 16:case"end":return a.stop()}}),a,null,[[2,10]])}))}var te,re=t(62),ae=t.n(re).a.create(),oe=function(){return ae.post("api/auth/logout")},ce=H.a.mark(ke),ie="auth/CAHNGE_FIELD",se="auth/INITIALIZE_FORM",ue=ee("auth/REGISTER"),be=Object(I.a)(ue,3),le=be[0],je=be[1],de=be[2],Oe=ee("auth/LOGIN"),pe=Object(I.a)(Oe,3),fe=pe[0],ge=pe[1],me=pe[2],he=Object(W.a)(ie,(function(e){return{form:e.form,key:e.key,value:e.value}})),xe=Object(W.a)(se,(function(e){return e})),ve=Object(W.a)(le,(function(e){return{username:e.username,password:e.password}})),ye=Object(W.a)(fe,(function(e){return{username:e.username,password:e.password}})),we=ne(le,(function(e){var n=e.username,t=e.password;return ae.post("/api/auth/register",{username:n,password:t})})),Ee=ne(fe,(function(e){var n=e.username,t=e.password;return ae.post("/api/auth/login",{username:n,password:t})}));function ke(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(le,we);case 2:return e.next=4,Object(Q.d)(fe,Ee);case 4:case"end":return e.stop()}}),ce)}var Ce,Se={register:{username:"",password:"",passwordConfirm:""},login:{username:"",password:""}},Ie=Object(J.a)((te={},Object(V.a)(te,ie,(function(e,n){var t=n.payload,r=t.form,a=t.key,o=t.value;return Object(q.a)(e,(function(e){e[r][a]=o}))})),Object(V.a)(te,se,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},Object(V.a)({},t,Se[t]))})),Object(V.a)(te,je,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{authError:null,auth:t})})),Object(V.a)(te,de,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{authError:t})})),Object(V.a)(te,ge,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{authError:null,auth:t})})),Object(V.a)(te,me,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{authError:t})})),te),Se),Te=t(13),Pe=H.a.mark(He),_e=H.a.mark(We),Le="user/TEMP_SET_USER",De=ee("user/CHECK"),Ne=Object(I.a)(De,3),Re=Ne[0],Fe=Ne[1],Ae=Ne[2],Me="user/LOGOUT",Ge=Object(W.a)(Le,(function(e){return e})),ze=Object(W.a)(Re),Ue=Object(W.a)(Me),Ve=ne(Re,(function(){return ae.get("/api/auth/check")}));function Be(){try{localStorage.removeItem("user")}catch(e){console.log("localStorage is not working")}}function He(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Q.b)(oe);case 3:localStorage.removeItem("user"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),Pe,null,[[0,6]])}function We(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(Re,Ve);case 2:return e.next=4,Object(Q.d)(Ae,Be);case 4:return e.next=6,Object(Q.d)(Me,He);case 6:case"end":return e.stop()}}),_e)}var Je,qe,Qe,Ze,Ke,$e=Object(J.a)((Ce={},Object(V.a)(Ce,Le,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{user:t})})),Object(V.a)(Ce,Fe,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{user:t,checkError:null})})),Object(V.a)(Ce,Ae,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{user:null,checkError:t})})),Object(V.a)(Ce,Me,(function(e){return Object(P.a)(Object(P.a)({},e),{},{user:null})})),Ce),{user:null,checkError:null}),Xe=Object(Te.e)((function(e){var n=e.history,t=Object(f.useState)(null),r=Object(I.a)(t,2),a=r[0],o=r[1],c=Object(T.b)(),i=Object(T.c)((function(e){var n=e.auth,t=e.user;return{form:n.login,auth:n.auth,authError:n.authError,user:t.user}})),s=i.form,u=i.auth,b=i.authError,l=i.user;return Object(f.useEffect)((function(){c(xe("login"))}),[c]),Object(f.useEffect)((function(){if(b)return console.log("\uc624\ub958 \ubc1c\uc0dd"),console.log(b),void o("Login Failed");u&&(console.log("\ub85c\uadf8\uc778 \uc131\uacf5"),c(ze()))}),[u,b,c]),Object(f.useEffect)((function(){if(l){n.push("/");try{localStorage.setItem("user",JSON.stringify(l))}catch(e){console.log("localStorage is not working")}}}),[n,l]),Object(E.jsx)(U,{type:"login",form:s,onChange:function(e){var n=e.target,t=n.value,r=n.name;c(he({form:"login",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=s.username,t=s.password;c(ye({username:n,password:t}))},error:a})})),Ye=function(){return Object(E.jsx)(S,{children:Object(E.jsx)(Xe,{})})},en=Object(Te.e)((function(e){var n=e.history,t=Object(f.useState)(null),r=Object(I.a)(t,2),a=r[0],o=r[1],c=Object(T.b)(),i=Object(T.c)((function(e){var n=e.auth,t=e.user;return{form:n.register,auth:n.auth,authError:n.authError,user:t.user}})),s=i.form,u=i.auth,b=i.authError,l=i.user;return Object(f.useEffect)((function(){c(xe("register"))}),[c]),Object(f.useEffect)((function(){if(b)return 409===b.response.status?void o("The username is already in use"):void o("Register Failed");u&&(console.log("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5"),console.log(u),c(ze()))}),[u,b,c]),Object(f.useEffect)((function(){if(l){n.push("/");try{localStorage.setItem("user",JSON.stringify(l))}catch(e){console.log("localStorage is not working")}}}),[n,l]),Object(E.jsx)(U,{type:"register",form:s,onChange:function(e){var n=e.target,t=n.value,r=n.name;c(he({form:"register",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=s.username,t=s.password,r=s.passwordConfirm;if(![n,r,t].includes(""))return t!==r?(o("Password does not match"),c(he({form:"register",key:"password",value:""})),void c(he({form:"register",key:"passwordConfirm",value:""}))):void c(ve({username:n,password:t}));o("Fill the blank")},error:a})})),nn=function(){return Object(E.jsx)("div",{children:Object(E.jsx)(S,{children:Object(E.jsx)(en,{})})})},tn=t(23),rn=t(69),an=y.b.div(Je||(Je=Object(x.a)(["\n    padding-left: 1rem;\n    padding-right: 1rem;\n    width: 1024px;\n    margin: 0 auto;\n\n    @media (max-width: 1024px) {\n        width: 768px;\n    }\n\n    @media (max-width: 768px) {\n        width: 100%;\n    }\n"]))),on=function(e){var n=e.children,t=Object(rn.a)(e,["children"]);return Object(E.jsx)(an,Object(P.a)(Object(P.a)({},t),{},{children:n}))},cn=t(65),sn=t.n(cn),un=(t(103),Object(y.b)(on)(qe||(qe=Object(x.a)(["\n    padding-top: 5rem;\n    padding-bottom: 5rem;\n"])))),bn=y.b.input(Qe||(Qe=Object(x.a)(["\n    font-size: 3rem;\n    outline: none;\n    padding-bottom: 0.5rem;\n    border: none;\n    border-bottom: 1px solid ",";\n    margin-bottom: 2rem;\n    width: 100%;\n"])),w.gray[4]),ln=y.b.div(Ze||(Ze=Object(x.a)(["\n    .ql-editor {\n        padding: 0;\n        min-height: 320px;\n        font-size: 1.125rem;\n        line-height: 1.5;\n    }\n    .ql-editor.ql-blank::before {\n        left: 0;\n    }\n"]))),jn=function(e){var n=e.onChangeField,t=e.title,r=e.body,a=Object(f.useRef)(null),o=Object(f.useRef)(null);Object(f.useEffect)((function(){o.current=new sn.a(a.current,{theme:"snow",placeholder:"type something...",modules:{toolbar:[[{header:1},{header:2}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block","link","image"]]}});var e=o.current;e.on("text-change",(function(t,r,a){"user"===a&&n({key:"body",value:e.root.innerHTML})}))}),[n]);var c=Object(f.useRef)(!1);Object(f.useEffect)((function(){c.current||(c.current=!0,o.current.root.innerHTML=r)}),[r]);return Object(E.jsxs)(un,{children:[Object(E.jsx)(bn,{placeholder:"input title",onChange:function(e){n({key:"title",value:e.target.value})},value:t}),Object(E.jsx)(ln,{children:Object(E.jsx)("div",{ref:a})})]})},dn=t(24),On=t.n(dn),pn=H.a.mark(Fn),fn="write/INITIALIZE",gn="write/CHANGE_FIELD",mn=ee("write/WRITE_POST"),hn=Object(I.a)(mn,3),xn=hn[0],vn=hn[1],yn=hn[2],wn="write/SET_ORIGINAL_POST",En=ee("write/UPDATE_POST"),kn=Object(I.a)(En,3),Cn=kn[0],Sn=kn[1],In=kn[2],Tn=Object(W.a)(fn),Pn=Object(W.a)(gn,(function(e){return{key:e.key,value:e.value}})),_n=Object(W.a)(xn,(function(e){return{title:e.title,body:e.body,tags:e.tags}})),Ln=Object(W.a)(wn,(function(e){return e})),Dn=Object(W.a)(Cn,(function(e){return{id:e.id,title:e.title,body:e.body,tags:e.tags}})),Nn=ne(xn,(function(e){var n=e.title,t=e.body,r=e.tags;return ae.post("/api/posts",{title:n,body:t,tags:r})})),Rn=ne(Cn,(function(e){var n=e.id,t=e.title,r=e.body,a=e.tags;return ae.patch("/api/posts/".concat(n),{title:t,body:r,tags:a})}));function Fn(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(xn,Nn);case 2:return e.next=4,Object(Q.d)(Cn,Rn);case 4:case"end":return e.stop()}}),pn)}var An,Mn,Gn,zn,Un,Vn,Bn,Hn,Wn,Jn,qn,Qn,Zn,Kn,$n,Xn,Yn,et={title:"",body:"",tags:[],post:null,postError:null,originalPostId:null},nt=Object(J.a)((Ke={},Object(V.a)(Ke,fn,(function(e){return et})),Object(V.a)(Ke,gn,(function(e,n){var t=n.payload,r=t.key,a=t.value;return Object(P.a)(Object(P.a)({},e),{},Object(V.a)({},r,a))})),Object(V.a)(Ke,xn,(function(e){return Object(P.a)(Object(P.a)({},e),{},{post:null,postError:null})})),Object(V.a)(Ke,vn,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{post:t})})),Object(V.a)(Ke,yn,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{postError:t})})),Object(V.a)(Ke,wn,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{title:t.title,body:t.body,tags:t.tags,originalPostId:t._id})})),Object(V.a)(Ke,Sn,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{post:t})})),Object(V.a)(Ke,In,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{postError:t})})),Ke),et),tt=function(){var e=Object(T.b)(),n=Object(T.c)((function(e){var n=e.write;return{title:n.title,body:n.body}})),t=n.title,r=n.body,a=Object(f.useCallback)((function(n){return e(Pn(n))}),[e]);return Object(f.useEffect)((function(){return function(){e(Tn())}}),[e]),Object(E.jsx)(jn,{onChangeField:a,title:t,body:r})},rt=t(46),at=y.b.div(An||(An=Object(x.a)(["\n    width: 100%;\n    border-top: 1px solid ",";\n    padding-top: 2rem;\n\n    h4 {\n        color: ",";\n        margin-top: 0;\n        margin-bottom: 0.5rem;\n    }\n"])),w.gray[2],w.gray[8]),ot=y.b.form(Mn||(Mn=Object(x.a)(["\n    border-radius: 4px;\n    overflow: hidden;\n    display: flex;\n    width: 256px;\n    border: 1px solid ",";\n    input, button {\n        outline: none;\n        border: none;\n        font-size: 1rem;\n    }\n    input { \n        padding: 0.5rem;\n        flex: 1;\n        min-width: 0;\n    }\n    button {\n        cursor: pointer;\n        padding-right: 1rem;\n        padding-left: 1rem;\n        border: none;\n        background: ",";\n        color: #fff;\n        font-weight: bold;\n        &:hover {\n            background: ",";\n        }\n    }\n"])),w.gray[9],w.gray[8],w.gray[6]),ct=y.b.div(Gn||(Gn=Object(x.a)(["\n    margin-right: 0.5rem;\n    color: ",";\n    cursor: pointer;\n    &:hover{\n        opacity: .5;\n    }\n"])),w.gray[8]),it=y.b.div(zn||(zn=Object(x.a)(["\n    display: flex;\n    margin-top: .5rem;\n"]))),st=g.a.memo((function(e){var n=e.tag,t=e.onRemove;return Object(E.jsxs)(ct,{onClick:function(){return t(n)},children:["#",n]})})),ut=g.a.memo((function(e){var n=e.tags,t=e.onRemove;return Object(E.jsx)(it,{children:n.map((function(e){return Object(E.jsx)(st,{tag:e,onRemove:t},e)}))})})),bt=function(e){var n=e.tags,t=e.onChangeTags,r=Object(f.useState)(""),a=Object(I.a)(r,2),o=a[0],c=a[1],i=Object(f.useState)([]),s=Object(I.a)(i,2),u=s[0],b=s[1],l=Object(f.useCallback)((function(e){if(e&&!u.includes(e)){var n=[].concat(Object(rt.a)(u),[e]);b([].concat(Object(rt.a)(u),[e])),t(n)}}),[u,t]),j=Object(f.useCallback)((function(e){var n=u.filter((function(n){return n!==e}));b(n),t(n)}),[u,t]),d=Object(f.useCallback)((function(e){c(e.target.value)}),[]),O=Object(f.useCallback)((function(e){e.preventDefault(),l(o.trim()),c("")}),[o,l]);return Object(f.useEffect)((function(){b(n)}),[n]),Object(E.jsxs)(at,{children:[Object(E.jsx)("h4",{children:"Tag"}),Object(E.jsxs)(ot,{onSubmit:O,children:[Object(E.jsx)("input",{placeholder:"enter tags",value:o,onChange:d}),Object(E.jsx)("button",{type:"submit",children:"Add"})]}),Object(E.jsx)(ut,{tags:u,onRemove:j})]})},lt=function(){var e=Object(T.b)(),n=Object(T.c)((function(e){return e.write.tags}));return Object(E.jsx)(bt,{onChangeTags:function(n){e(Pn({key:"tags",value:n}))},tags:n})},jt=y.b.div(Un||(Un=Object(x.a)(["\n    margin-top: 1rem;;\n    margin-bottom: 3rem;\n    button + button {\n        margin-left: 0.5rem;\n    }\n"]))),dt=Object(y.b)(N)(Vn||(Vn=Object(x.a)(["\n    height: 2.125rem;\n    & + & {\n        margin-left: 0.5rem;\n    }\n"]))),Ot=function(e){var n=e.onCancel,t=e.onPublish,r=e.isEdit;return Object(E.jsxs)(jt,{children:[Object(E.jsxs)(dt,{red:!0,onClick:t,children:["Post ",r?"Edit":""]}),Object(E.jsx)(dt,{onClick:n,children:"Cancel"})]})},pt=Object(Te.e)((function(e){var n=e.history,t=Object(T.b)(),r=Object(T.c)((function(e){var n=e.write;return{title:n.title,body:n.body,tags:n.tags,post:n.post,postError:n.postError,originalPostId:n.originalPostId}})),a=r.title,o=r.body,c=r.tags,i=r.post,s=r.postError,u=r.originalPostId;return Object(f.useEffect)((function(){if(i){var e=i._id,t=i.user;n.push("/@".concat(t.username,"/").concat(e))}s&&console.log(s)}),[n,s,i]),Object(E.jsx)(Ot,{onPublish:function(){t(u?Dn({title:a,body:o,tags:c,id:u}):_n({title:a,body:o,tags:c}))},onCancel:function(){n.goBack()},isEdit:!u})})),ft=function(){return Object(E.jsxs)(on,{children:[Object(E.jsx)(tn.a,{children:Object(E.jsx)("title",{children:"New Post - GIVVEMEE \u2763\ufe0f"})}),Object(E.jsx)(tt,{}),Object(E.jsx)(lt,{}),Object(E.jsx)(pt,{})]})},gt=y.b.div(Bn||(Bn=Object(x.a)(["\n    position: fixed;\n    width: 100%;\n    background: white;\n    box-shadow: 0px 2px 4px rgba(0,0,0, 0.08);\n"]))),mt=Object(y.b)(on)(Hn||(Hn=Object(x.a)(["\n    height: 4rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .logo {\n        font-size: 1.125rem;\n        font-weight: 800;\n        letter-spacing: 2px;\n    }\n    .right {\n        display: flex;\n        align-items: center;\n    }\n"]))),ht=y.b.div(Wn||(Wn=Object(x.a)(["\n    height: 4rem;\n"]))),xt=y.b.div(Jn||(Jn=Object(x.a)(["\n    font-weight: 800;\n    margin-right: 1rem;\n"]))),vt=function(e){var n=e.user,t=e.onLogout;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(gt,{children:Object(E.jsxs)(mt,{children:[Object(E.jsx)(v.b,{to:"/",className:"logo",children:"GIVVEMEE \u2763\ufe0f"}),n?Object(E.jsxs)("div",{className:"right",children:[Object(E.jsx)(xt,{children:n.username}),Object(E.jsx)(N,{onClick:t,children:"Log out"})]}):Object(E.jsx)("div",{className:"right",children:Object(E.jsx)(N,{to:"/login",children:"Login"})})]})}),Object(E.jsx)(ht,{})]})},yt=function(){var e=Object(T.c)((function(e){return{user:e.user.user}})).user,n=Object(T.b)();return Object(E.jsx)(vt,{user:e,onLogout:function(){n(Ue())}})},wt=t(66),Et=y.b.div(qn||(qn=Object(x.a)(["\n    ","\n    color: ",";\n    span + span:before {\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\B7'\n    }\n"],["\n    ","\n    color: ",";\n    span + span:before {\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\\\B7'\n    }\n"])),(function(e){return e.hasMarginTop&&Object(y.a)(Qn||(Qn=Object(x.a)(["\n        margin-top: 1rem;\n    "])))}),w.gray[6],w.gray[4]),kt=function(e){var n=e.username,t=e.publishDate,r=e.hasMarginTop;return Object(E.jsxs)(Et,{hasMarginTop:r,children:[Object(E.jsx)("span",{children:Object(E.jsx)("b",{children:Object(E.jsx)(v.b,{to:"/@".concat(n),children:n})})}),Object(E.jsx)("span",{children:new Date(t).toLocaleDateString()})]})},Ct=y.b.div(Zn||(Zn=Object(x.a)(["\n    margin-top: .5rem;\n    .tag {\n        display: inline-block;\n        color: ",";\n        text-decoration: none;\n        margin-right: .5rem;\n        &:hover {\n            color: ",";\n        }\n    }\n"])),w.red[7],w.red[6]),St=function(e){var n=e.tags;return Object(E.jsx)(Ct,{children:n.map((function(e){return Object(E.jsxs)(v.b,{className:"tag",tag:e,to:"/?tag=".concat(e),children:["#",e]})}))})},It=Object(y.b)(on)(Kn||(Kn=Object(x.a)(["\n    margin-top: 4rem;\n"]))),Tt=y.b.div($n||($n=Object(x.a)(["\n    border-bottom: 1px solid ",";\n    padding-bottom: 3rem;\n    margin-bottom: 3rem;\n    h1 {\n        font-size: 3rem;\n        line-height: 1.5;\n        margin: 0;\n    }\n"])),w.gray[2]),Pt=y.b.div(Xn||(Xn=Object(x.a)(["\n    font-size: 1.3125rem;\n    color: ",";\n"])),w.gray[8]),_t=function(e){var n=e.post,t=e.error,r=e.loading,a=e.actionButtons;if(t)return t.response&&404===t.response.status?Object(E.jsx)(It,{children:"No Post Exists"}):Object(E.jsx)(It,{children:"Error!"});if(r||!n)return null;var o=n.title,c=n.body,i=n.user,s=n.publishDate,u=n.tags;return Object(E.jsxs)(It,{children:[Object(E.jsx)(tn.a,{children:Object(E.jsxs)("title",{children:[o," - GIVVEMEE"]})}),Object(E.jsxs)(Tt,{children:[Object(E.jsx)("h1",{children:o}),Object(E.jsx)(kt,{username:i.username,publishDate:s,hasMarginTop:!0}),Object(E.jsx)(St,{tags:u})]}),a,Object(E.jsx)(Pt,{dangerouslySetInnerHTML:{__html:c}})]})},Lt=H.a.mark(Vt),Dt=ee("post/READ_POST"),Nt=Object(I.a)(Dt,3),Rt=Nt[0],Ft=Nt[1],At=Nt[2],Mt="post/UNLOAD_POST",Gt=Object(W.a)(Rt,(function(e){return e})),zt=Object(W.a)(Mt),Ut=ne(Rt,(function(e){return ae.get("/api/posts/".concat(e))}));function Vt(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(Rt,Ut);case 2:case"end":return e.stop()}}),Lt)}var Bt,Ht,Wt,Jt,qt,Qt,Zt,Kt,$t,Xt,Yt,er={post:null,error:null},nr=Object(J.a)((Yn={},Object(V.a)(Yn,Ft,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{post:t})})),Object(V.a)(Yn,At,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{error:t})})),Object(V.a)(Yn,Mt,(function(){return er})),Yn),er),tr=y.b.div(Bt||(Bt=Object(x.a)(["\n    position: fixed;\n    z-index: 30;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.25);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]))),rr=y.b.div(Ht||(Ht=Object(x.a)(["\n    width: 320px;\n    background: #fff;\n    padding: 1.5rem;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.125);\n    h2 {\n        margin-top: 0;\n        margin-bottom: 1rem;\n    }\n    p {\n        margin-bottom: 3rem;\n    }\n    .buttons {\n        display: flex;\n        justify-content: flex-end;\n    }\n"]))),ar=Object(y.b)(N)(Wt||(Wt=Object(x.a)(["\n    height: 2rem;\n    & + & {\n        margin-left: 0.75rem;\n    }\n"]))),or=function(e){var n=e.visible,t=e.title,r=e.description,a=e.confirmText,o=void 0===a?"Confirm":a,c=e.cancelText,i=void 0===c?"Cancel":c,s=e.onConfirm,u=e.onCancel;return n?Object(E.jsx)(tr,{children:Object(E.jsxs)(rr,{children:[Object(E.jsx)("h2",{children:t}),Object(E.jsx)("p",{children:r}),Object(E.jsxs)("div",{className:"buttons",children:[Object(E.jsx)(ar,{onClick:u,children:i}),Object(E.jsx)(ar,{red:!0,onClick:s,children:o})]})]})}):null},cr=function(e){var n=e.visible,t=e.onConfirm,r=e.onCancel;return Object(E.jsx)(or,{visible:n,title:"Delete post",description:"Are you sure to delete post?",onCancel:r,onConfirm:t})},ir=y.b.div(Jt||(Jt=Object(x.a)(["\n    display: flex;\n    justify-content: flex-end;\n    margin-bottom: 2rem;\n    margin-top: 1.5rem;\n"]))),sr=y.b.button(qt||(qt=Object(x.a)(["\n    padding: 0.25rem 0.5rem;\n    border-radius: 4px;\n    color: ",";\n    font-weight: bold;\n    border: none;\n    outline: none;\n    font-size: 0.875rem;\n    cursor: pointer;\n    &:hover {\n        background: ",";\n        color: ",";\n    }\n    & + & {\n        margin-left: 0.25rem;\n    }\n"])),w.gray[6],w.gray[1],w.red[7]),ur=function(e){var n=e.onEdit,t=e.onRemove,r=Object(f.useState)(!1),a=Object(I.a)(r,2),o=a[0],c=a[1];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(ir,{children:[Object(E.jsx)(sr,{onClick:n,children:"Edit Post"}),Object(E.jsx)(sr,{onClick:function(){c(!0)},children:"Delete Post"})]}),Object(E.jsx)(cr,{visible:o,onConfirm:function(){c(!1),t()},onCancel:function(){c(!1)}})]})},br=Object(Te.e)((function(e){var n=e.match,t=e.history,r=n.params.postId,a=Object(T.b)(),o=Object(T.c)((function(e){var n=e.post,t=e.loading,r=e.user;return{post:n.post,error:n.error,loading:t["post/READ_POST"],user:r.user}})),c=o.post,i=o.error,s=o.loading,u=o.user;Object(f.useEffect)((function(){return a(Gt(r)),function(){a(zt())}}),[a,r]);var b=function(){var e=Object(wt.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=r,ae.delete("/api/posts/".concat(n));case 3:t.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var n}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),l=(u&&u._id)===(c&&c.user._id);return Object(E.jsx)(_t,{post:c,loading:s,error:i,actionButtons:l&&Object(E.jsx)(ur,{onEdit:function(){a(Ln(c)),t.push("/write")},onRemove:b})})})),lr=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(yt,{}),Object(E.jsx)(br,{})]})},jr=y.b.div(Qt||(Qt=Object(x.a)(["\n    width: 320px;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 3rem;\n"]))),dr=y.b.div(Zt||(Zt=Object(x.a)([""]))),Or=function(e){var n=e.username,t=e.tag,r=e.page,a=On.a.stringify({tag:t,page:r});return n?"/@".concat(n,"?").concat(a):"/?".concat(a)},pr=function(e){var n=e.page,t=e.lastPage,r=e.username,a=e.tag;return Object(E.jsxs)(jr,{children:[Object(E.jsx)(N,{disabled:1===n,to:1===n?void 0:Or({username:r,tag:a,page:n-1}),children:"Prev"}),Object(E.jsx)(dr,{children:n}),Object(E.jsx)(N,{disabled:n===t,to:n===t?void 0:Or({username:r,tag:a,page:n+1}),children:"Next"})]})},fr=Object(Te.e)((function(e){var n=e.location,t=Object(T.c)((function(e){var n=e.posts,t=e.loading;return{lastPage:n.lastPage,posts:n.posts,loading:t["posts/LIST_POSTS"]}})),r=t.lastPage,a=t.posts,o=t.loading;if(!a||o)return null;var c=On.a.parse(n.search,{ignoreQueryPrefix:!0}),i=c.tag,s=c.username,u=c.page,b=void 0===u?1:u;return Object(E.jsx)(pr,{tag:i,username:s,page:parseInt(b,10),lastPage:r})})),gr=Object(y.b)(on)(Kt||(Kt=Object(x.a)(["\n    margin-top: 3rem;\n"]))),mr=y.b.div($t||($t=Object(x.a)(["\n    display: flex;\n    justify-content: flex-end;\n    margin-bottom: 3rem;\n"]))),hr=y.b.div(Xt||(Xt=Object(x.a)(["\n    padding: 3rem 0;\n    &:first-child {\n        padding-top: 0;\n    }\n    & + & {\n        border-top: 1px solid ","\n    }\n    h2 {\n        font-size: 2rem;\n        margin-bottom: 0;\n        margin-top: 0;\n        &:hover {\n            color: ","\n        }\n    }\n    p {\n        margin-top: 2rem;\n    }\n"])),w.gray[2],w.gray[6]),xr=function(e){var n=e.post,t=n.publishDate,r=n.user,a=n.tags,o=n.title,c=n.body,i=n._id;return Object(E.jsxs)(hr,{children:[Object(E.jsx)(v.b,{to:"/@".concat(r.username,"/").concat(i),children:o}),Object(E.jsx)(kt,{username:r.username,publishDate:new Date(t)}),Object(E.jsx)(St,{tags:a}),Object(E.jsx)("p",{children:c})]})},vr=function(e){var n=e.posts,t=e.loading,r=e.error,a=e.showWriteButton;return r?Object(E.jsx)(gr,{children:"Error!"}):Object(E.jsxs)(gr,{children:[Object(E.jsx)(mr,{children:a&&Object(E.jsx)(N,{red:!0,to:"/write",children:"Post new"})}),!t&&n&&Object(E.jsx)("div",{children:n.map((function(e){return Object(E.jsx)(xr,{post:e},e._id)}))})]})},yr=H.a.mark(Pr),wr=ee("posts/LIST_POSTS"),Er=Object(I.a)(wr,3),kr=Er[0],Cr=Er[1],Sr=Er[2],Ir=Object(W.a)(kr,(function(e){return{username:e.username,tag:e.tag,page:e.page}})),Tr=ne(kr,(function(e){var n=e.page,t=e.username,r=e.tag,a=On.a.stringify({page:n,username:t,tag:r});return ae.get("/api/posts?".concat(a))}));function Pr(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(kr,Tr);case 2:case"end":return e.stop()}}),yr)}var _r=Object(J.a)((Yt={},Object(V.a)(Yt,Cr,(function(e,n){var t=n.payload,r=n.meta;return Object(P.a)(Object(P.a)({},e),{},{posts:t,lastPage:parseInt(r.headers["last-page"],10)})})),Object(V.a)(Yt,Sr,(function(e,n){var t=n.payload;return Object(P.a)(Object(P.a)({},e),{},{error:t})})),Yt),{posts:null,error:null,lastPage:1}),Lr=Object(Te.e)((function(e){var n=e.location,t=e.match,r=Object(T.b)(),a=Object(T.c)((function(e){var n=e.posts,t=e.loading,r=e.user;return{posts:n.posts,error:n.error,loading:t["posts/LIST_POSTS"],user:r.user}})),o=a.posts,c=a.error,i=a.loading,s=a.user;return Object(f.useEffect)((function(){var e=t.params.username,a=On.a.parse(n.search,{ignoreQueryPrefix:!0}),o=a.tag,c=a.page;r(Ir({tag:o,username:e,page:c}))}),[r,n.search]),Object(E.jsx)(vr,{loading:i,error:c,posts:o,showWriteButton:s})})),Dr=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(yt,{}),Object(E.jsx)(Lr,{}),Object(E.jsx)(fr,{})]})},Nr=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(tn.a,{children:Object(E.jsx)("title",{children:"GIVVEMEE \u2763\ufe0f"})}),Object(E.jsx)(Te.a,{component:Dr,path:["/@:username","/"],exact:!0}),Object(E.jsx)(Te.a,{component:Ye,path:"/login"}),Object(E.jsx)(Te.a,{component:nn,path:"/register"}),Object(E.jsx)(Te.a,{component:ft,path:"/write"}),Object(E.jsx)(Te.a,{component:lr,path:"/@:username/:postId"})]})},Rr=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,118)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),o(e),c(e)}))},Fr=t(25),Ar=H.a.mark(Mr);function Mr(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([ke(),We(),Fn(),Vt(),Pr()]);case 2:case"end":return e.stop()}}),Ar)}var Gr=Object(Fr.combineReducers)({auth:Ie,loading:Y,user:$e,write:nt,post:nr,posts:_r}),zr=t(67),Ur=t(68),Vr=Object(Ur.a)(),Br=Object(Fr.createStore)(Gr,Object(zr.composeWithDevTools)(Object(Fr.applyMiddleware)(Vr)));Vr.run(Mr),function(){try{var e=localStorage.getItem("user");if(!e)return;Br.dispatch(Ge(JSON.parse(e))),Br.dispatch(ze())}catch(n){console.log("localStorage is not working")}}(),h.a.render(Object(E.jsx)(T.a,{store:Br,children:Object(E.jsx)(v.a,{children:Object(E.jsx)(tn.b,{children:Object(E.jsx)(Nr,{})})})}),document.getElementById("root")),Rr()},74:function(e,n,t){}},[[115,1,2]]]);
//# sourceMappingURL=main.66210aa5.chunk.js.map